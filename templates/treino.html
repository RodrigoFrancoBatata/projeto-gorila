<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ dia }} | Projeto Gorila</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="container">
    <a href="/" class="voltar">‚Üê Voltar</a>
    <h1>{{ dia }}</h1>

    {% if exercicios %}
      {% for i, ex in enumerate(exercicios) %}
        <div class="card {% if ex.concluido %}concluido{% endif %}">
          {% if ex.imagem %}
            <img src="/static/imagens/{{ ex.imagem }}" alt="{{ ex.exercicio }}" class="imagem-exercicio" />
          {% endif %}
          <h3>{{ ex.exercicio }}</h3>
          <p><strong>S√©ries:</strong> {{ ex.series }}</p>
          <p><strong>Carga:</strong> {{ ex.carga }} kg</p>
          {% if ex.obs %}
            <p><strong>Obs:</strong> {{ ex.obs }}</p>
          {% endif %}

          <form method="post" class="form-linha">
            <input type="hidden" name="index" value="{{ i }}" />
            <input type="hidden" name="concluido" value="1" />
            <button type="submit" class="botao-acao">
              {% if ex.concluido %}üîÅ Desmarcar{% else %}‚úÖ Marcar como conclu√≠do{% endif %}
            </button>
          </form>

          <form method="post" class="form-linha">
            <input type="hidden" name="index" value="{{ i }}" />
            <label>Alterar carga:</label>
            <input type="text" name="nova_carga" value="{{ ex.carga }}" required />
            <button type="submit" class="botao-acao">üí™ Atualizar</button>
          </form>
        </div>
      {% endfor %}
    {% else %}
      <p>Nenhum exerc√≠cio cadastrado para este treino.</p>
    {% endif %}

    <div class="formulario">
      <h2>‚ûï Adicionar Novo Exerc√≠cio</h2>
      <form method="post" action="/adicionar/{{ dia }}" enctype="multipart/form-data">
        <label>Nome do exerc√≠cio:</label>
        <input type="text" name="exercicio" required />

        <label>Foto do equipamento:</label>
        <input type="file" name="imagem" accept="image/*" capture="environment" required />

        <label>S√©ries:</label>
        <input type="text" name="series" required />

        <label>Carga (kg):</label>
        <input type="text" name="carga" required />

        <label>Observa√ß√µes:</label>
        <input type="text" name="obs" />

        <button type="submit" class="botao-acao">‚ûï Adicionar</button>
      </form>
    </div>
  </div>

  <!-- Bot√£o Dark Mode -->
  <button class="dark-toggle" onclick="toggleDark()">üåô</button>
  <script>
    const toggleDark = () => {
      document.body.classList.toggle("dark");
      localStorage.setItem("darkmode", document.body.classList.contains("dark"));
    };
    window.onload = () => {
      if (localStorage.getItem("darkmode") === "true") {
        document.body.classList.add("dark");
      }
    };
  </script>
</body>
</html>
