<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>{{ dia }} | Projeto Gorila</title>
  <link rel="stylesheet" href="/static/style.css">
  <script>
    function iniciarDescanso(segundos, botao) {
      let tempo = segundos;
      botao.disabled = true;
      const original = botao.textContent;
      const intervalo = setInterval(() => {
        if (tempo > 0) {
          botao.textContent = `${tempo--}s`;
        } else {
          clearInterval(intervalo);
          botao.textContent = original;
          botao.disabled = false;
        }
      }, 1000);
    }
  </script>
</head>
<body>
  <div class="container">
    <h1>Treino: {{ dia }}</h1>

    {% for exercicio in exercicios %}
      {% set i = loop.index0 %}
      <div class="exercicio{% if exercicio.concluido %} concluido{% endif %}">
        <div class="exercicio-topo">
          <span class="nome">{{ exercicio.exercicio }}</span>
          <span><strong>S√©rie:</strong> {{ exercicio.series }}</span>
          <span><strong>Carga:</strong> {{ exercicio.carga }}</span>
        </div>

        <div class="obs">
          <strong>Obs:</strong> {{ exercicio.obs }}
        </div>

        <div class="exercicio-layout">
          <img src="/static/imagens/{{ exercicio.imagem }}" alt="{{ exercicio.exercicio }}">

          <div class="acoes">
            <form method="post">
              <input type="hidden" name="index" value="{{ i }}">
              <button type="submit" name="concluido" class="concluir">
                {{ 'Conclu√≠do' if exercicio.concluido else 'Concluir' }}
              </button>
            </form>

            <div class="descanso">
              <button onclick="iniciarDescanso(30, this)">30s</button>
              <button onclick="iniciarDescanso(45, this)">45s</button>
              <button onclick="iniciarDescanso(60, this)">60s</button>
            </div>

            <form method="post">
              <input type="hidden" name="index" value="{{ i }}">
              <label>Editar carga:</label>
              <input type="text" name="nova_carga" placeholder="Nova carga">
              <button type="submit">Salvar</button>
            </form>

            <div class="series">
              {% for s in range(1,5) %}
                <input type="checkbox" id="serie{{s}}_{{i}}">
              {% endfor %}
              <label for="serie1_{{i}}">S√©ries</label>
            </div>

            <form method="post" action="/excluir/{{ dia }}/{{ i }}">
              <button type="submit" class="excluir">‚ùå</button>
            </form>
          </div>
        </div>
      </div>
    {% endfor %}

    <div class="formulario">
      <h2>Adicionar novo exerc√≠cio</h2>
      <form method="post" action="/adicionar/{{ dia }}" enctype="multipart/form-data">
        <input type="text" name="exercicio" placeholder="Nome do exerc√≠cio" required>
        <input type="file" name="imagem" accept="image/*" required>
        <input type="text" name="carga" placeholder="Carga" required>
        <input type="text" name="series" placeholder="S√©rie" required>
        <input type="text" name="obs" placeholder="Observa√ß√µes">
        <button type="submit">Adicionar</button>
      </form>
    </div>

    <a href="/" class="voltar">‚¨Ö</a>
  </div>

  <!-- Bot√£o de modo escuro -->
  <button class="dark-toggle" onclick="toggleDark()">üåô</button>
  <script>
    const toggleDark = () => {
      document.body.classList.toggle("dark");
      localStorage.setItem("darkmode", document.body.classList.contains("dark"));
    };
    window.onload = () => {
      if (localStorage.getItem("darkmode") === "true") {
        document.body.classList.add("dark");
      }
    };
  </script>
</body>
</html>

